function googleSuccess(){"use strict";function e(e){var t="<h3>"+e.name+"</h3><br><div style='width:100px;min-height:70px'><img src=\""+e.photoUrl+'"></div><div><a href="'+e.shortUrl+'" target="_blank">More details on Foursquare</a><img src="img/Foursquare_150.png">',a="Sorry, Foursquare content currently not available.";return e.name.length>0?t:a}function t(e){null!==e.getAnimation()?e.setAnimation(null):(e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},700))}function a(){var a=this;this.isNavClosed=ko.observable(!1),this.navClick=function(){this.isNavClosed(!this.isNavClosed())},this.pointList=ko.observableArray(),initialPoint.forEach(function(e){a.pointList.push(new i(e))}),this.pointList().forEach(function(a){var o=new google.maps.Marker({map:map,position:a.location,icon:n,animation:google.maps.Animation.DROP});a.marker=o,bounds.extend(o.position),o.addListener("click",function(n){map.panTo(this.position),map.panBy(0,-200),infowindow.setContent(e(a)),infowindow.open(map,o),t(o)})}),a.getFoursquareData=ko.computed(function(){a.pointList().forEach(function(e){var t=e.fs_id+"/?",a=BaseUrl+t+fsClient_id+fsClient_secret+fsVersion;$.ajax({type:"GET",url:a,dataType:"json",cache:!1,success:function(t){var a=t.response?t.response:"";a.venue?t.venue:"";e.name=a.venue.name,e.shortUrl=a.venue.shortUrl,e.photoUrl=a.venue.bestPhoto.prefix+"height150"+a.venue.bestPhoto.suffix}})})}),this.itemClick=function(e){e.markerId;google.maps.event.trigger(e.marker,"click")},a.filter=ko.observable(""),this.filteredPointList=ko.dependentObservable(function(){var e=this.filter().toLowerCase();return e?ko.utils.arrayFilter(this.pointList(),function(t){return t.name.toLowerCase().indexOf(e)>=0?!0:(t.marker.setVisible(!1),!1)}):ko.utils.arrayFilter(a.pointList(),function(e){return e.marker.setVisible(!0),!0})},this)}var n={url:"img/star.ico",size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,32)},o={center:{lat:41.3910101,lng:2.1535417},zoom:13,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"landscape",elementType:"labels.icon",stylers:[{saturation:"-100"},{lightness:"-54"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"on"},{lightness:"0"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"poi",elementType:"labels.icon",stylers:[{saturation:"-89"},{lightness:"-55"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"transit.station",elementType:"labels.icon",stylers:[{visibility:"on"},{saturation:"-100"},{lightness:"-51"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}],mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};map=new google.maps.Map(document.getElementById("map"),o),infowindow=new google.maps.InfoWindow({maxWidth:150,content:"Barcelona"}),bounds=new google.maps.LatLngBounds,map.addListener("click",function(){infowindow.close(infowindow)}),window.onresize=function(){map.fitBounds(bounds)};var i=function(e,t,a){this.name=ko.observable(e.name),this.location=e.location,this.marker="",this.markerId=t,this.fs_id=e.fs_id,this.shortUrl="",this.photoUrl=""};ko.applyBindings(new a)}var initialPoint=[{name:"La Sagrada Familia",location:{lat:41.4036299,lng:2.1721671},fs_id:"4adcda50f964a520544121e3"},{name:"La Rambla",location:{lat:41.3806562,lng:2.1716642},fs_id:"4e04dda152b1cef647d55881"},{name:"Park Güell",location:{lat:41.4144948,lng:2.1505058},fs_id:"4b76bca2f964a520975b2ee3"},{name:"Parc de la Ciutadella",location:{lat:41.388123,lng:2.1838265},fs_id:"4adcda50f964a5203b4121e3"},{name:"Casa Batlló",location:{lat:41.3916408,lng:2.1626786},fs_id:"4adcda51f964a520aa4121e3"},{name:"Montjuïc",location:{lat:41.3639993,lng:2.1587383},fs_id:"5453c6cf498e75ddfe254ab2"},{name:"Camp Nou Stadium",location:{lat:41.380896,lng:2.1206311},fs_id:"507fe73fd63e93639fd2a84f"},{name:"Palau de la Música Catalana",location:{lat:41.3875752,lng:2.1731241},fs_id:"4af1b973f964a52083e221e3"},{name:"Museu Picasso de Barcelona",location:{lat:41.385216,lng:2.178704},fs_id:"4b55e65af964a52054f527e3"},{name:"CosmoCaixa Barcelona",location:{lat:41.412972,lng:2.1293623},fs_id:"4bb7834598c7ef3b0ae12f02"},{name:"Poble Espanyol",location:{lat:41.3688085,lng:2.1460845},fs_id:"4adcda5af964a520504421e3"},{name:"Columbus Monument, Barcelona",location:{lat:41.3757974,lng:2.1755696},fs_id:"4b9cfc34f964a5209c8636e3"},{name:"Casa Museu Gaudi",location:{lat:41.4044181,lng:2.158967},fs_id:"4adcda52f964a520d34121e3"}],BaseUrl="https://api.foursquare.com/v2/venues/",fsClient_id="client_id=AT0ECWQZ2FSMLVFY0RMA4L05YDQGGYUFHRR1YRRRD0RLOLXC",fsClient_secret="&client_secret=JOJY3UZPPBNZQ1IPGC2MCODJLPBC2QLIZV2HE31ANCY4PUAT",fsVersion="&v=20161110",map,infowindow,bounds;